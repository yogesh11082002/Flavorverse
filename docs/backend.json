
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the FlavorVerse platform.",
      "properties": {
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "The user's chosen display name."
        },
        "photoURL": {
          "type": "string",
          "description": "URL to the user's profile image.",
          "format": "uri"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        }
      },
      "required": [
        "email"
      ]
    },
    "Dish": {
      "title": "Dish",
      "type": "object",
      "description": "Represents a homemade dish shared on the FlavorVerse platform.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the dish."
        },
        "description": {
          "type": "string",
          "description": "A description of the dish."
        },
        "image": {
          "type": "object",
          "properties": {
            "imageUrl": { "type": "string", "format": "uri" },
            "imageHint": { "type": "string" }
          },
          "required": ["imageUrl", "imageHint"]
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who created the dish."
        },
        "author": {
            "type": "string",
            "description": "Display name of the user who created the dish."
        },
        "authorImage": {
            "type": "object",
            "properties": {
                "imageUrl": { "type": "string", "format": "uri" },
                "imageHint": { "type": "string" }
            },
            "required": ["imageUrl"]
        },
        "category": {
            "type": "string",
            "enum": ["Trending", "Latest", "Popular"]
        },
        "price": {
            "type": "number",
            "description": "The price of the dish."
        },
        "discount": {
            "type": "number",
            "description": "The discount percentage for the dish."
        },
        "likesCount": {
          "type": "number",
          "description": "Denormalized count of likes for efficient querying."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the dish was created.",
          "format": "date-time"
        }
      },
      "required": [
        "name",
        "description",
        "image",
        "userId",
        "author",
        "authorImage",
        "category",
        "price",
        "createdAt"
      ]
    },
    "Comment": {
      "title": "Comment",
      "type": "object",
      "description": "Represents a comment on a dish.",
      "properties": {
        "dishId": {
          "type": "string",
          "description": "Reference to the Dish being commented on."
        },
        "userId": {
          "type": "string",
          "description": "Reference to the User who wrote the comment."
        },
         "author": {
            "type": "string",
            "description": "Display name of the user who made the comment."
        },
        "authorImage": {
            "type": "string",
            "description": "URL of the profile image of the user who made the comment."
        },
        "text": {
          "type": "string",
          "description": "The text content of the comment."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the comment was created.",
          "format": "date-time"
        }
      },
      "required": [
        "dishId",
        "userId",
        "author",
        "text",
        "createdAt"
      ]
    },
    "Like": {
      "title": "Like",
      "type": "object",
      "description": "Represents a like on a dish. The document ID is the userId.",
      "properties": {
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the like was created.",
          "format": "date-time"
        }
      },
      "required": [
        "createdAt"
      ]
    },
    "CartItem": {
      "title": "Cart Item",
      "description": "A dish that has been added to a user's shopping cart.",
      "type": "object",
      "properties": {
        "quantity": { "type": "number" },
        "price": { "type": "number" },
        "name": { "type": "string" },
        "description": { "type": "string" },
        "image": {
          "type": "object",
           "properties": {
            "imageUrl": { "type": "string", "format": "uri" },
            "imageHint": { "type": "string" }
          }
        },
        "category": { "type": "string" }
      },
      "required": ["quantity", "price", "name", "image"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores public user profile information."
    },
    "/users/{userId}/cart/{dishId}": {
      "schema": { "$ref": "#/entities/CartItem" },
      "description": "Subcollection storing items in a user's shopping cart."
    },
    "/dishes/{dishId}": {
      "schema": { "$ref": "#/entities/Dish" },
      "description": "Top-level collection of all dishes for public browsing."
    },
    "/dishes/{dishId}/comments/{commentId}": {
        "schema": { "$ref": "#/entities/Comment" },
        "description": "Subcollection storing comments for a specific dish."
    },
    "/dishes/{dishId}/likes/{userId}": {
        "schema": { "$ref": "#/entities/Like" },
        "description": "Subcollection storing likes for a specific dish. The document ID is the ID of the user who liked it."
    }
  }
}
